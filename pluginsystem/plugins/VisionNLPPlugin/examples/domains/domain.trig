@prefix schema: <http://schema.org/> .
# @base <http://localhost:8090/rdf4j/repositories/domain#> .

@prefix agents: <http://localhost:8090/rdf4j/repositories/agents#> .
@prefix behaviors: <http://localhost:8090/rdf4j/repositories/behaviors#> .
@prefix : <http://localhost:8090/rdf4j/repositories/domain#> .
@prefix services: <http://localhost:8090/rdf4j/repositories/services#> .

@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ajan: <http://www.ajan.de/ajan-ns#> .
@prefix bt: <http://www.ajan.de/behavior/bt-ns#> .
@prefix asp: <http://www.ajan.de/behavior/asp-ns#> .
@prefix mosim: <http://www.dfki.de/mosim-ns#> .
@prefix suite: <http://www.dfki.de/suite-ns#> .
@prefix aml: <https://w3id.org/i40/aml#> .
@prefix test: <http://test.de#> .
@prefix wgs84_pos: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix transit: <http://vocab.org/transit/terms/> .
@prefix gn: <http://www.geonames.org/ontology#> .

@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix ex: <http://www.example.com/> .
@prefix carml: <http://carml.taxonic.com/carml/> .
@prefix vision-ns: <http://www.ajan.de/behavior/vision-nlp-ns#> .

# --------------------------------------------
# --------------- RML Mappings ---------------
# --------------------------------------------

# --------------------------------
# JsonTest -----------------------
# --------------------------------

:JsonTestMapping {

# see https://rml.io/specs/rml/ for an example input

    :VenueMapping a rr:TriplesMap ;
        rml:logicalSource
            [
                rml:source
                    [
                        a carml:Stream ;
                    ] ;
                rml:referenceFormulation ql:JSONPath ;
                rml:iterator "$"
            ] ;

        rr:subjectMap
            [
                rr:template "http://loc.example.com/city/{location.city}" ;
                rr:class schema:City
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate wgs84_pos:lat ;
                rr:objectMap
                    [
                        rml:reference "venue.latitude"
                    ]
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate wgs84_pos:long ;
                rr:objectMap
                    [
                        rml:reference "venue.longitude"
                    ]
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate gn:countryCode ;
                rr:objectMap
                    [
                        rml:reference "location.country"
                    ]
            ] .
}

# --------------------------------
# WarehouseMapping ---------------
# --------------------------------
:WarehouseTestMapping {
    :WarehouseMapping a rr:TriplesMap ;
        rml:logicalSource
            [
                rml:source
                [
                    a carml:Stream ;
                ];
                rml:referenceFormulation ql:JSONPath ;
                rml:iterator "$.items[*]" ;
            ] ;

        rr:subjectMap
            [
                rr:template "http://example.com/warehouse/item/{itemID}" ;
                rr:class schema:WarehouseItem ;
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate vision-ns:name ;
                rr:objectMap
                    [
                        rml:reference "itemName" ;
                        rr:datatype xsd:string ;
                    ] ;
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate vision-ns:description ;
                rr:objectMap
                    [
                        rml:reference "description" ;
                    ] ;
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate vision-ns:quantity ;
                rr:objectMap
                    [
                        rml:reference "quantity" ;
                        rr:datatype xsd:integer ;
                    ] ;
            ] ;

        rr:predicateObjectMap
            [
                rr:predicate vision-ns:location ;
                rr:objectMap
                    [
                        rr:parentTriplesMap :LocationMapping ;
                        rml:reference "location" ;
                    ] ;
            ] .
}
